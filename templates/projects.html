{% extends "base.html" %}
{% block title %}Projects{% endblock %}
{% block content %}
<style>
@keyframes fadeInUp {
    from {
        opacity: 0;
        transform: translateY(30px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

@keyframes scaleIn {
    from {
        opacity: 0;
        transform: scale(0.9);
    }
    to {
        opacity: 1;
        transform: scale(1);
    }
}

.animate-fadeInUp {
    animation: fadeInUp 0.8s ease-out forwards;
}

.animate-scaleIn {
    animation: scaleIn 0.6s ease-out forwards;
}

.animate-delay-200 { animation-delay: 0.2s; }
.animate-delay-300 { animation-delay: 0.3s; }
.animate-delay-400 { animation-delay: 0.4s; }
.animate-delay-500 { animation-delay: 0.5s; }
.animate-delay-600 { animation-delay: 0.6s; }
.animate-delay-700 { animation-delay: 0.7s; }

.opacity-0 { opacity: 0; }

.project-card {
    transition: all 0.3s ease;
}

.project-card:hover {
    transform: translateY(-5px) scale(1.02);
}

.project-image {
    transition: transform 0.3s ease;
}

.project-card:hover .project-image {
    transform: scale(1.05);
}

/* Zoom Indicator Styles */
.zoom-indicator {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%) scale(0);
    background: rgba(0, 0, 0, 0.8);
    backdrop-filter: blur(10px);
    border: 2px solid rgba(255, 255, 255, 0.3);
    border-radius: 50%;
    width: 60px;
    height: 60px;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.3s ease;
    pointer-events: none;
    z-index: 10;
}

.zoom-indicator svg {
    color: white;
    filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.5));
}

.project-card:hover .zoom-indicator {
    transform: translate(-50%, -50%) scale(1);
    animation: pulse 2s infinite;
}

@keyframes pulse {
    0%, 100% {
        box-shadow: 0 0 0 0 rgba(59, 130, 246, 0.7);
    }
    50% {
        box-shadow: 0 0 0 10px rgba(59, 130, 246, 0);
    }
}

</style>

<section id="projects" class="min-h-screen flex flex-col justify-center px-4 sm:px-6 lg:px-8 py-12">
    <div class="max-w-7xl mx-auto w-full">
        <!-- Header -->
        <div class="text-center mb-16 opacity-0 animate-fadeInUp">
            <h2 class="text-4xl sm:text-5xl lg:text-6xl font-bold mb-6 text-transparent bg-clip-text bg-gradient-to-r from-blue-200 to-purple-200">
                My Projects
            </h2>
            <p class="text-xl text-gray-300 max-w-3xl mx-auto">
                Here are some of my favorite projects I've recently worked on. Click on any image for a closer look! Feel free to explore the projects repositories and respective README.md files on GitHub.
            </p>
        </div>

        <!-- Projects Grid -->
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 mb-16">
            {% for project in projects %}
            <div class="project-card bg-white/5 backdrop-blur-xl rounded-2xl border border-white/10 overflow-hidden group opacity-0 animate-scaleIn animate-delay-{{ loop.index * 100 }}">
            <!-- Project Image -->
            <div class="relative h-48 overflow-hidden cursor-pointer" onclick="handleImageClick(this)">
    <img 
        src="{{ url_for('static', filename='images/projects/' + project.img) }}"
        alt="{{ project.title }}" 
        class="project-image w-full h-full object-cover"
        data-image-src="{{ url_for('static', filename='images/projects/' + project.img) }}"
        data-image-title="{{ project.title }}">
    <div class="absolute inset-0 bg-gradient-to-t from-black/50 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300 pointer-events-none"></div>
    <div class="zoom-indicator">
        <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0zM10 7v3m0 0v3m0-3h3m-3 0H7"/>
        </svg>
    </div>
    <div class="absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity duration-300 pointer-events-none">
        <svg class="w-6 h-6 text-white drop-shadow-lg" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0zM10 7v3m0 0v3m0-3h3m-3 0H7"/>
        </svg>
    </div>
</div>

            <!-- Project Content -->
            <div class="p-6">
                <h3 class="text-xl font-bold text-white mb-3 group-hover:text-blue-300 transition-colors duration-300">
                {{ project.title }}
                </h3>
                
                <p class="text-gray-300 text-sm mb-4 line-clamp-3">
                {{ project.description }}
                </p>

                <!-- Technologies Used -->
                {% if project.technologies %}
                <div class="flex flex-wrap gap-2 mb-4">
                {% for tech in project.technologies %}
                <span class="px-2 py-1 text-xs bg-blue-600/20 text-blue-300 rounded-full border border-blue-400/30">
                    {{ tech }}
                </span>
                {% endfor %}
                </div>
                {% endif %}

                <!-- Action Buttons -->
                <div class="flex gap-4">
                    <!-- GitHub Button -->
                    <a href="{{ project.github_link }}" 
                       target="_blank" 
                       rel="noopener noreferrer"
                       class="w-full px-4 py-2 bg-gray-800/50 text-white text-center rounded-lg hover:bg-gray-700/60 transition-all duration-300 font-medium text-sm border border-gray-600/30 hover:border-gray-500/50 flex items-center justify-center">
                        <svg class="w-4 h-4 mr-2" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M12 0C5.37 0 0 5.37 0 12c0 5.3 3.44 9.8 8.2 11.38.6.1.82-.26.82-.58v-2.02c-3.34.72-4.04-1.6-4.04-1.6-.54-1.38-1.32-1.74-1.32-1.74-1.08-.74.08-.72.08-.72 1.2.08 1.84 1.24 1.84 1.24 1.06 1.82 2.78 1.3 3.46.98.1-.76.42-1.3.76-1.6-2.66-.3-5.46-1.34-5.46-5.96 0-1.32.46-2.4 1.22-3.24-.12-.3-.54-1.52.12-3.16 0 0 1-.32 3.3 1.22a11.3 11.3 0 0 1 6 0c2.3-1.54 3.3-1.22 3.3-1.22.66 1.64.24 2.86.12 3.16.76.84 1.22 1.92 1.22 3.24 0 4.62-2.8 5.66-5.46 5.96.42.36.8 1.1.8 2.22v3.28c0 .32.22.68.82.58A12 12 0 0 0 24 12c0-6.63-5.37-12-12-12z"/>
                        </svg>
                        View on GitHub
                    </a>

                    <!-- Live Demo Button -->
                    {% if project.live_demo_link %}
                    <a href="{{ project.live_demo_link }}" 
                       target="_blank" 
                       rel="noopener noreferrer"
                       class="w-full px-4 py-2 bg-blue-600 text-white text-center rounded-lg hover:bg-blue-700 transition-all duration-300 font-medium text-sm border border-blue-500/30 hover:border-blue-400/50 flex items-center justify-center">
                        <svg class="w-4 h-4 mr-2" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M12 2a10 10 0 1 0 10 10A10 10 0 0 0 12 2zm1 15h-2v-2h2zm0-4h-2V7h2z"/>
                        </svg>
                        Live Demo
                    </a>
                    {% endif %}
                </div>
            </div>
            </div>
            {% endfor %}
        </div>
    </div>

    <!-- Image Modal -->
    <div id="imageModal" class="fixed inset-0 z-50 hidden bg-black/80 backdrop-blur-sm">
        <div class="flex items-center justify-center min-h-screen p-4">
            <div class="relative max-w-screen-lg w-full">
                <!-- Close Button -->
                <button onclick="closeImageModal()" 
                        class="absolute -top-12 right-0 text-white hover:text-red-400 transition-colors duration-200 z-10 bg-black/50 rounded-full p-2">
                    <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
                    </svg>
                </button>
                
                <!-- Image Container -->
                <div class="bg-white/10 backdrop-blur-xl rounded-2xl border border-white/20 overflow-hidden shadow-2xl">
                    <img id="modalImage" 
                         src="" 
                         alt="" 
                         class="w-full h-auto max-h-[80vh] object-contain">
                    <div class="p-4 bg-black/30">
                        <h3 id="modalTitle" class="text-xl font-bold text-white text-center"></h3>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>


<script>
if (history.scrollRestoration) {
    history.scrollRestoration = 'manual';
}

window.addEventListener('beforeunload', function() {
    window.scrollTo(0, 0);
});

window.addEventListener('load', function() {
    setTimeout(() => {
        window.scrollTo(0, 0);
    }, 0);
});

// Image Modal Functions
function openImageModal(imageSrc, imageTitle) {
    console.log('Opening modal with:', imageSrc, imageTitle); // Debug line
    const modal = document.getElementById('imageModal');
    const modalImage = document.getElementById('modalImage');
    const modalTitle = document.getElementById('modalTitle');
    
    modalImage.src = imageSrc;
    modalImage.alt = imageTitle;
    modalTitle.textContent = imageTitle;
    
    modal.classList.remove('hidden');
    modal.classList.add('animate-fadeIn');
    document.body.style.overflow = 'hidden';
    
    // Add click outside to close
    modal.onclick = function(e) {
        if (e.target === modal) {
            closeImageModal();
        }
    }
}

function closeImageModal() {
    const modal = document.getElementById('imageModal');
    modal.classList.add('animate-fadeOut');
    
    setTimeout(() => {
        modal.classList.add('hidden');
        modal.classList.remove('animate-fadeIn', 'animate-fadeOut');
        document.body.style.overflow = 'auto';
    }, 200);
}

// Add event listeners to all project images when page loads
document.addEventListener('DOMContentLoaded', function() {
    const projectImages = document.querySelectorAll('.project-image');
    
    projectImages.forEach(function(img) {
        img.addEventListener('click', function() {
            const imageSrc = this.getAttribute('data-image-src');
            const imageTitle = this.getAttribute('data-image-title');
            console.log('Image clicked:', imageSrc, imageTitle); // Debug line
            openImageModal(imageSrc, imageTitle);
        });
    });
});

// Keyboard navigation
document.addEventListener('keydown', function(e) {
    if (e.key === 'Escape') {
        closeImageModal();
    }
});

// Add additional animations for modal
const style = document.createElement('style');
style.textContent = `
    .animate-fadeIn {
        animation: modalFadeIn 0.3s ease-out forwards;
    }
    
    .animate-fadeOut {
        animation: modalFadeOut 0.2s ease-in forwards;
    }
    
    @keyframes modalFadeIn {
        from {
            opacity: 0;
            transform: scale(0.95);
        }
        to {
            opacity: 1;
            transform: scale(1);
        }
    }
    
    @keyframes modalFadeOut {
        from {
            opacity: 1;
            transform: scale(1);
        }
        to {
            opacity: 0;
            transform: scale(0.95);
        }
    }
`;
document.head.appendChild(style);
</script>

{% endblock %}
