<!-- filepath: c:\Users\talal\OneDrive\Desktop\python_job_scraper\templates\index.html -->
{% extends "python_scraper/base.html" %}

{% block content %}
<div class="container">
    <h1>Python Remote Jobs</h1>
    <p>Showing {{ jobs|length }} current Python job openings from RemoteOK</p>

    <div class="row">
        <div class="col-12">
            <div class="d-flex justify-content-between align-items-center mb-4">
                <h1>Python Remote Jobs</h1>
                <a href="{{ url_for('python_scraper.refresh_jobs') }}" class="btn btn-primary btn-lg">
                    ðŸ”„ Refresh Jobs
                </a>
            </div>
            
            <p class="lead">Showing {{ jobs|length }} current Python job openings from RemoteOK</p>

            <!-- Jobs Table -->
            {% if jobs %}
                <div class="table-responsive">
                    <table class="table table-striped table-hover">
                        <thead class="table-dark">
                            <tr>
                                <th>Job Title</th>
                                <th>Company</th>
                                <th>Location</th>
                                <th>Skills</th>
                                <th>Posted</th>
                                <th>Apply</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for job in jobs %}
                            <tr>
                                <td>
                                    <strong>{{ job.title }}</strong>
                                </td>
                                <td>{{ job.company }}</td>
                                <td>
                                    <span class="badge bg-secondary">{{ job.location }}</span>
                                </td>
                                <td>
                                    {% if job.tags %}
                                        <div class="d-flex flex-wrap gap-1">
                                            {% set tags_list = job.tags.split(', ') %}
                                            {% for tag in tags_list[:4] %}
                                                <span class="badge bg-info text-dark">{{ tag }}</span>
                                            {% endfor %}
                                            {% if tags_list|length > 4 %}
                                                <span class="badge bg-light text-dark">+{{ tags_list|length - 4 }} more</span>
                                            {% endif %}
                                        </div>
                                    {% else %}
                                        <span class="text-muted">No skills listed</span>
                                    {% endif %}
                                </td>
                                <td>
                                    <small class="text-muted">
                                        {% if job.date_posted and job.date_posted != 'N/A' %}
                                            {{ job.date_posted[:10] }}
                                        {% else %}
                                            Recently
                                        {% endif %}
                                    </small>
                                </td>
                                <td>
                                    {% if job.url %}
                                        <a href="{{ job.url }}" target="_blank" class="btn btn-sm btn-outline-primary">
                                            View Job â†’
                                        </a>
                                    {% else %}
                                        <span class="text-muted">No link</span>
                                    {% endif %}
                                </td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>

                <div class="mt-4 text-center">
                    <p class="text-muted">
                        Last updated: {{ jobs[0].scraped_at[:19] if jobs else 'Never' }}
                    </p>
                    <a href="{{ url_for('python_scraper.refresh_jobs') }}" class="btn btn-outline-primary">
                        ðŸ”„ Refresh for Latest Jobs
                    </a>
                </div>
            {% else %}
                <div class="alert alert-info text-center py-5">
                    <h4>No Jobs Available Yet</h4>
                    <p class="mb-3">Click the "Refresh Jobs" button to scrape the latest Python job listings from RemoteOK.</p>
                    <a href="{{ url_for('python_scraper.refresh_jobs') }}" class="btn btn-primary btn-lg">
                        ðŸ”„ Get Latest Jobs
                    </a>
                </div>
            {% endif %}
        </div>
    </div>
</div>
{% endblock %}